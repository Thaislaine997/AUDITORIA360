<!--
  ===================================================================
  BASE LAYOUT TEMPLATE - AUDITORIA 360
  ===================================================================
  Descrição: Template base reutilizável para todas as páginas
  Versão: 2.0 - Enhanced with improved reusability and accessibility
  ===================================================================
-->
<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="{{description}}" />
    <meta name="author" content="AUDITORIA360" />
    <meta name="keywords" content="{{keywords}}" />
    <title>{{title}} - AUDITORIA360</title>

    <!-- Bootstrap Grid & Components -->
    <link rel="stylesheet" href="../../assets/bootstrap-grid.css" />
    <!-- Core Stylesheets -->
    {{#each coreStyles}}
    <link rel="stylesheet" href="{{this}}" />
    {{/each}}

    <!-- Page-specific Stylesheets -->
    {{#each pageStyles}}
    <link rel="stylesheet" href="{{this}}" />
    {{/each}}

    <!-- Legacy single CSS support -->
    {{#if cssPath}}
    <link rel="stylesheet" href="{{cssPath}}" />
    {{/if}}

    <!-- Custom Styles - Bootstrap Compatible -->
    <link rel="stylesheet" href="../../assets/custom.css" />

    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <!-- Custom head content -->
    {{customHead}}
  </head>
  <body class="{{bodyClass}}">
    <!-- Skip navigation for accessibility -->
    <a
      href="#main-content"
      class="skip-link"
      aria-label="Ir para o conteúdo principal"
      >Pular para o conteúdo principal</a
    >

    <!-- Header Component -->
    {{#if showHeader}}
    <header
      class="{{headerClass}} navbar navbar-expand-lg navbar-dark bg-dark shadow-sm"
      role="banner"
    >
      <div class="container-fluid">
        <div class="navbar-brand d-flex align-items-center">
          {{#if headerIcon}}
          <div class="header-icon me-2" aria-hidden="true">{{headerIcon}}</div>
          {{/if}}
          <div class="header-content">
            <h1 class="fs-5 fw-semibold mb-0">{{headerTitle}}</h1>
            {{#if headerSubtitle}}
            <p class="small text-muted mb-0">{{headerSubtitle}}</p>
            {{/if}}
          </div>
        </div>
        {{#if headerActions}}
        <div class="header-actions">{{headerActions}}</div>
        {{/if}}
      </div>
    </header>
    {{/if}}

    <!-- Navigation Component -->
    {{#if showNavigation}}
    <nav
      class="main-navigation"
      role="navigation"
      aria-label="Navegação principal"
    >
      {{navigation}}
    </nav>
    {{/if}}

    <!-- Main Content with Bootstrap Container -->
    <main
      id="main-content"
      class="{{mainClass}} container-fluid py-4"
      role="main"
      tabindex="-1"
    >
      <div class="row">
        <div class="col-12">{{content}}</div>
      </div>
    </main>

    <!-- Auto-refresh indicator -->
    {{#if showRefreshIndicator}}
    <div
      class="refresh-indicator"
      role="status"
      aria-live="polite"
      aria-label="Indicador de atualização automática"
    >
      Auto-refresh: <span id="refresh-countdown">{{refreshInterval}}</span>s
    </div>
    {{/if}}

    <!-- Footer Component -->
    {{#if showFooter}}
    <footer class="{{footerClass}}" role="contentinfo">
      {{#if showTimestamp}}
      <p class="timestamp">
        Última atualização:
        <time id="timestamp" datetime="{{lastUpdate}}"></time>
      </p>
      {{/if}} {{footerContent}}
    </footer>
    {{/if}}

    <!-- Core Scripts -->
    {{#each coreScripts}}
    <script type="module" src="{{this}}"></script>
    {{/each}}

    <!-- Page-specific Scripts -->
    {{#each pageScripts}}
    <script type="module" src="{{this}}"></script>
    {{/each}}

    <!-- Legacy single script support -->
    {{#if scripts}} {{scripts}} {{/if}}
  </body>
</html>
