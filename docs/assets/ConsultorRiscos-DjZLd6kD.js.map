{"version":3,"file":"ConsultorRiscos-DjZLd6kD.js","sources":["../../src/services/riskAnalysisService.ts","../../src/pages/ConsultorRiscos.tsx"],"sourcesContent":["// Risk Analysis Service - Consultor de Riscos API integration\nimport api from './api';\n\n// Types for Risk Analysis\nexport interface RiscoDetalhado {\n  categoria: string;\n  tipo_risco: string;\n  descricao: string;\n  evidencia: string;\n  impacto_potencial: string;\n  plano_acao: string;\n  severidade: number;\n}\n\nexport interface AnaliseRiscoResponse {\n  empresa_id: number;\n  empresa_nome: string;\n  score_risco: number;\n  nivel_risco: string;\n  data_analise: string;\n  progresso_analise: Record<string, string>;\n  riscos_encontrados: RiscoDetalhado[];\n  total_riscos: number;\n  riscos_criticos: number;\n  riscos_altos: number;\n  riscos_medios: number;\n  riscos_baixos: number;\n  score_anterior?: number;\n  variacao_score?: number;\n}\n\nexport interface HistoricoAnaliseRisco {\n  id: number;\n  empresa_id: number;\n  contabilidade_id: number;\n  score_risco: number;\n  data_analise: string;\n  relatorio_resumo: {\n    total_riscos: number;\n    nivel_risco: string;\n    categorias: Record<string, number>;\n  };\n}\n\nexport interface AnaliseRiscoRequest {\n  empresa_id: number;\n}\n\n// Risk Analysis API Service Class\nexport class RiskAnalysisService {\n  \n  /**\n   * Execute comprehensive risk analysis for a company\n   * This triggers the \"Oracle\" - the predictive risk analysis engine\n   */\n  static async analisarRiscos(request: AnaliseRiscoRequest): Promise<AnaliseRiscoResponse> {\n    try {\n      console.log(`üîÆ Triggering risk analysis for company ${request.empresa_id}...`);\n      \n      const response = await api.post<AnaliseRiscoResponse>('/riscos/analisar', request);\n      \n      console.log(`‚úÖ Risk analysis completed: Score ${response.data.score_risco}/100`);\n      return response.data;\n    } catch (error: any) {\n      console.error('‚ùå Risk analysis failed:', error);\n      \n      // Enhanced error handling\n      if (error.response?.status === 404) {\n        throw new Error('Empresa n√£o encontrada. Verifique se o ID est√° correto.');\n      } else if (error.response?.status === 500) {\n        throw new Error(`Erro interno na an√°lise: ${error.response.data?.detail || 'Erro desconhecido'}`);\n      } else {\n        throw new Error(`Falha na an√°lise de riscos: ${error.message}`);\n      }\n    }\n  }\n\n  /**\n   * Get risk analysis history for a company\n   * Used for trending and evolution tracking\n   */\n  static async obterHistoricoRiscos(\n    empresa_id: number, \n    limit: number = 10\n  ): Promise<HistoricoAnaliseRisco[]> {\n    try {\n      console.log(`üìä Fetching risk history for company ${empresa_id}...`);\n      \n      const response = await api.get<HistoricoAnaliseRisco[]>(\n        `/riscos/historico/${empresa_id}`,\n        { params: { limit } }\n      );\n      \n      console.log(`‚úÖ Retrieved ${response.data.length} historical analyses`);\n      return response.data;\n    } catch (error: any) {\n      console.error('‚ùå Failed to fetch risk history:', error);\n      \n      if (error.response?.status === 404) {\n        throw new Error('Empresa n√£o encontrada.');\n      } else {\n        throw new Error(`Erro ao buscar hist√≥rico: ${error.message}`);\n      }\n    }\n  }\n\n  /**\n   * Convert risk severity number to user-friendly text\n   */\n  static getSeverityLabel(severidade: number): string {\n    switch (severidade) {\n      case 5: return 'CR√çTICO';\n      case 4: return 'ALTO';\n      case 3: return 'M√âDIO';\n      case 2: return 'BAIXO';\n      case 1: return 'INFORMATIVO';\n      default: return 'DESCONHECIDO';\n    }\n  }\n\n  /**\n   * Get risk level color for UI display\n   */\n  static getRiskLevelColor(nivel_risco: string): string {\n    switch (nivel_risco) {\n      case 'CR√çTICO': return '#EF4444'; // Red\n      case 'ALTO': return '#F59E0B'; // Orange\n      case 'M√âDIO': return '#F59E0B'; // Yellow\n      case 'BAIXO': return '#10B981'; // Green\n      default: return '#6B7280'; // Gray\n    }\n  }\n\n  /**\n   * Get risk category icon\n   */\n  static getCategoryIcon(categoria: string): string {\n    switch (categoria) {\n      case 'TRABALHISTA': return 'üë∑';\n      case 'FISCAL': return 'üìã';\n      case 'OPERACIONAL': return '‚öôÔ∏è';\n      case 'CONFORMIDADE': return '‚úÖ';\n      default: return '‚ö†Ô∏è';\n    }\n  }\n\n  /**\n   * Format risk score with appropriate messaging\n   */\n  static formatScoreMessage(score: number, nivel_risco: string): string {\n    if (score >= 90) {\n      return `Excelente! Score ${score}/100 - Empresa com pr√°ticas exemplares de compliance.`;\n    } else if (score >= 80) {\n      return `Muito bom! Score ${score}/100 - Poucos riscos identificados.`;\n    } else if (score >= 60) {\n      return `Aten√ß√£o! Score ${score}/100 - Alguns riscos requerem a√ß√£o.`;\n    } else if (score >= 40) {\n      return `Alerta! Score ${score}/100 - M√∫ltiplos riscos identificados.`;\n    } else {\n      return `Cr√≠tico! Score ${score}/100 - A√ß√£o imediata necess√°ria.`;\n    }\n  }\n\n  /**\n   * Calculate risk evolution trend\n   */\n  static calculateTrend(score_atual: number, score_anterior?: number): {\n    trend: 'up' | 'down' | 'stable';\n    message: string;\n    color: string;\n  } {\n    if (!score_anterior) {\n      return {\n        trend: 'stable',\n        message: 'Primeira an√°lise',\n        color: '#6B7280'\n      };\n    }\n\n    const diff = score_atual - score_anterior;\n    \n    if (diff > 5) {\n      return {\n        trend: 'up',\n        message: `+${diff} pontos (melhoria)`,\n        color: '#10B981'\n      };\n    } else if (diff < -5) {\n      return {\n        trend: 'down', \n        message: `${diff} pontos (deteriora√ß√£o)`,\n        color: '#EF4444'\n      };\n    } else {\n      return {\n        trend: 'stable',\n        message: 'Est√°vel',\n        color: '#6B7280'\n      };\n    }\n  }\n}\n\nexport default RiskAnalysisService;","import React, { useState, useEffect } from \"react\";\nimport {\n  Container,\n  Typography,\n  Box,\n  Paper,\n  TextField,\n  Button,\n  Grid,\n  Card,\n  CardContent,\n  Chip,\n  List,\n  ListItem,\n  ListItemText,\n  Divider,\n  IconButton,\n  Modal,\n  LinearProgress,\n  Alert,\n  Tooltip,\n  CircularProgress,\n  Select,\n  MenuItem,\n  FormControl,\n  InputLabel,\n} from \"@mui/material\";\nimport {\n  Psychology,\n  Send,\n  History,\n  TrendingUp,\n  TrendingDown,\n  TrendingFlat,\n  Warning,\n  CheckCircle,\n  ThumbUp,\n  ThumbDown,\n  ExpandMore,\n  Info,\n  Close,\n  Assessment,\n  Business,\n} from \"@mui/icons-material\";\n\n// Import our new Risk Analysis Service\nimport RiskAnalysisService, { \n  type AnaliseRiscoResponse, \n  type RiscoDetalhado,\n  type HistoricoAnaliseRisco \n} from \"../services/riskAnalysisService\";\n\nconst ConsultorRiscos: React.FC = () => {\n  // State management for the real API integration\n  const [selectedEmpresaId, setSelectedEmpresaId] = useState<number>(1); // Default test company\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [analysisResult, setAnalysisResult] = useState<AnaliseRiscoResponse | null>(null);\n  const [analysisError, setAnalysisError] = useState<string | null>(null);\n  const [selectedRisk, setSelectedRisk] = useState<any>(null);\n  const [drillDownModal, setDrillDownModal] = useState(false);\n  const [feedback, setFeedback] = useState<{ [key: string]: 'positive' | 'negative' | null }>({});\n  const [riskHistory, setRiskHistory] = useState<HistoricoAnaliseRisco[]>([]);\n  \n  // Load risk history when component mounts\n  useEffect(() => {\n    loadRiskHistory();\n  }, [selectedEmpresaId]);\n\n  const loadRiskHistory = async () => {\n    try {\n      const history = await RiskAnalysisService.obterHistoricoRiscos(selectedEmpresaId, 5);\n      setRiskHistory(history);\n    } catch (error) {\n      console.warn('Could not load risk history:', error);\n    }\n  };\n\n  const handleAnalyze = async () => {\n    setIsAnalyzing(true);\n    setAnalysisError(null);\n\n    try {\n      console.log(`üîÆ Starting risk analysis for company ${selectedEmpresaId}`);\n      \n      const result = await RiskAnalysisService.analisarRiscos({ \n        empresa_id: selectedEmpresaId \n      });\n      \n      setAnalysisResult(result);\n      \n      // Reload history to show the new analysis\n      await loadRiskHistory();\n      \n      console.log('‚úÖ Risk analysis completed successfully');\n    } catch (error: any) {\n      console.error('‚ùå Risk analysis failed:', error);\n      setAnalysisError(error.message || 'Erro desconhecido na an√°lise de riscos');\n    } finally {\n      setIsAnalyzing(false);\n    }\n  };\n\n  const handleFeedback = (riskId: number, type: 'positive' | 'negative') => {\n    setFeedback(prev => ({ ...prev, [riskId]: type }));\n    \n    // RLHF v2.0 - Enhanced feedback submission\n    fetch('/api/v1/ai/feedback', {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        recommendation_id: riskId,\n        feedback_type: type,\n        timestamp: new Date().toISOString(),\n        user_context: {\n          workspace: 'risk-analysis',\n          session_id: sessionStorage.getItem('session_id'),\n          empresa_id: selectedEmpresaId\n        }\n      })\n    }).then(response => {\n      if (response.ok) {\n        console.log(`‚úÖ RLHF feedback successfully submitted for risk ${riskId}: ${type}`);\n      }\n    }).catch(err => {\n      console.warn('‚ö†Ô∏è RLHF feedback submission failed:', err);\n    });\n  };\n\n  const handleDrillDown = (riskFactor: string) => {\n    // Use real risk history data if available\n    if (riskHistory.length > 0) {\n      const mockHistorical = riskHistory.slice(0, 5).map((analysis, index) => ({\n        month: new Date(analysis.data_analise).toLocaleDateString('pt-BR', { month: 'short' }),\n        value: analysis.score_risco + Math.random() * 10 - 5 // Add some variation for demo\n      }));\n      \n      setSelectedRisk({\n        factor: riskFactor,\n        historicalData: mockHistorical\n      });\n    } else {\n      // Fallback to mock data\n      setSelectedRisk({\n        factor: riskFactor,\n        historicalData: [\n          { month: \"Jan\", value: 15 },\n          { month: \"Fev\", value: 23 },\n          { month: \"Mar\", value: 31 },\n          { month: \"Abr\", value: 18 },\n          { month: \"Mai\", value: 25 },\n        ]\n      });\n    }\n    setDrillDownModal(true);\n  };\n\n  const getConfidenceColor = (severidade: number) => {\n    // Map severity to colors (5=critical, 1=low)\n    if (severidade >= 4) return '#EF4444'; // High/Critical - red\n    if (severidade >= 3) return '#F59E0B'; // Medium - orange\n    if (severidade >= 2) return '#10B981'; // Low - green\n    return '#6B7280'; // Very low - gray\n  };\n\n  const getTrendIcon = () => {\n    if (!analysisResult?.score_anterior) return <TrendingFlat />;\n    \n    const trend = RiskAnalysisService.calculateTrend(\n      analysisResult.score_risco,\n      analysisResult.score_anterior\n    );\n    \n    switch (trend.trend) {\n      case 'up': return <TrendingUp color=\"success\" />;\n      case 'down': return <TrendingDown color=\"error\" />;\n      default: return <TrendingFlat color=\"disabled\" />;\n    }\n  };\n\n  return (\n    <>\n      <Container maxWidth=\"xl\">\n      <Box sx={{ mb: 4 }}>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n          üîÆ Consultor de Riscos\n        </Typography>\n        <Typography variant=\"subtitle1\" color=\"text.secondary\">\n          An√°lise preditiva inteligente para identifica√ß√£o proativa de riscos trabalhistas, fiscais e operacionais.\n        </Typography>\n      </Box>\n\n      <Grid container spacing={3}>\n        <Grid item xs={12} md={8}>\n          <Paper sx={{ p: 3 }}>\n            <Typography variant=\"h6\" gutterBottom>\n              ü§ñ An√°lise Inteligente de Riscos\n            </Typography>\n            \n            {/* Company Selection */}\n            <Box sx={{ mb: 3 }}>\n              <FormControl fullWidth>\n                <InputLabel>Empresa para An√°lise</InputLabel>\n                <Select\n                  value={selectedEmpresaId}\n                  onChange={(e) => setSelectedEmpresaId(Number(e.target.value))}\n                  label=\"Empresa para An√°lise\"\n                >\n                  <MenuItem value={1}>Empresa Teste de Riscos S/A</MenuItem>\n                  <MenuItem value={2}>Outra Empresa Ltda (Demo)</MenuItem>\n                  <MenuItem value={3}>Empresa Exemplo ME (Demo)</MenuItem>\n                </Select>\n              </FormControl>\n            </Box>\n\n            {/* Analysis Trigger */}\n            <Button\n              variant=\"contained\"\n              size=\"large\"\n              startIcon={isAnalyzing ? <CircularProgress size={20} /> : <Assessment />}\n              onClick={handleAnalyze}\n              disabled={isAnalyzing}\n              sx={{ mb: 3 }}\n            >\n              {isAnalyzing ? \"Analisando...\" : \"Executar Nova An√°lise Completa\"}\n            </Button>\n\n            {/* Analysis Progress */}\n            {isAnalyzing && (\n              <Box sx={{ mt: 2, mb: 3, p: 2, bgcolor: \"grey.50\", borderRadius: 1 }}>\n                <Typography variant=\"body2\" gutterBottom>\n                  ü§ñ Consultor de Riscos processando an√°lise...\n                </Typography>\n                {analysisResult?.progresso_analise && Object.entries(analysisResult.progresso_analise).map(([step, status]) => (\n                  <Box key={step} sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                    <Typography variant=\"caption\" sx={{ minWidth: 200 }}>\n                      {step.replace(/_/g, ' ')}: \n                    </Typography>\n                    <Typography variant=\"caption\" color=\"success.main\">\n                      {status}\n                    </Typography>\n                  </Box>\n                ))}\n                <LinearProgress sx={{ mt: 2 }} />\n              </Box>\n            )}\n\n            {/* Analysis Error */}\n            {analysisError && (\n              <Alert severity=\"error\" sx={{ mb: 3 }}>\n                <Typography variant=\"body2\">\n                  ‚ùå Erro na an√°lise: {analysisError}\n                </Typography>\n              </Alert>\n            )}\n\n            {/* Analysis Results */}\n            {analysisResult && (\n              <Paper sx={{ mt: 3, p: 3 }}>\n                <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                  <Business sx={{ mr: 1 }} />\n                  <Typography variant=\"h6\">\n                    üìä Relat√≥rio: {analysisResult.empresa_nome}\n                  </Typography>\n                </Box>\n                \n                {/* Risk Score Display */}\n                <Box sx={{ mb: 3, p: 2, bgcolor: 'primary.light', borderRadius: 2 }}>\n                  <Grid container spacing={2} alignItems=\"center\">\n                    <Grid item xs={12} md={4}>\n                      <Typography variant=\"h3\" color=\"primary\" sx={{ fontWeight: 'bold' }}>\n                        {analysisResult.score_risco}/100\n                      </Typography>\n                      <Typography variant=\"h6\" color=\"primary\">\n                        Score de Risco\n                      </Typography>\n                      <Chip \n                        label={analysisResult.nivel_risco}\n                        color={analysisResult.nivel_risco === 'BAIXO' ? 'success' : \n                               analysisResult.nivel_risco === 'M√âDIO' ? 'warning' : 'error'}\n                        size=\"large\"\n                        sx={{ mt: 1 }}\n                      />\n                    </Grid>\n                    <Grid item xs={12} md={4}>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        {RiskAnalysisService.formatScoreMessage(analysisResult.score_risco, analysisResult.nivel_risco)}\n                      </Typography>\n                      {analysisResult.score_anterior && (\n                        <Box sx={{ display: 'flex', alignItems: 'center', mt: 1 }}>\n                          {getTrendIcon()}\n                          <Typography variant=\"caption\" sx={{ ml: 1 }}>\n                            {RiskAnalysisService.calculateTrend(\n                              analysisResult.score_risco,\n                              analysisResult.score_anterior\n                            ).message}\n                          </Typography>\n                        </Box>\n                      )}\n                    </Grid>\n                    <Grid item xs={12} md={4}>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        √öltima an√°lise: {new Date(analysisResult.data_analise).toLocaleDateString('pt-BR')}\n                      </Typography>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        Total de riscos: {analysisResult.total_riscos}\n                      </Typography>\n                    </Grid>\n                  </Grid>\n                </Box>\n\n                {/* Risk Summary */}\n                <Grid container spacing={2} sx={{ mb: 3 }}>\n                  <Grid item xs={3}>\n                    <Card sx={{ textAlign: 'center', bgcolor: 'error.light' }}>\n                      <CardContent>\n                        <Typography variant=\"h4\" color=\"error\">{analysisResult.riscos_criticos}</Typography>\n                        <Typography variant=\"body2\">Cr√≠ticos</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                  <Grid item xs={3}>\n                    <Card sx={{ textAlign: 'center', bgcolor: 'warning.light' }}>\n                      <CardContent>\n                        <Typography variant=\"h4\" color=\"warning.dark\">{analysisResult.riscos_altos}</Typography>\n                        <Typography variant=\"body2\">Altos</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                  <Grid item xs={3}>\n                    <Card sx={{ textAlign: 'center', bgcolor: 'info.light' }}>\n                      <CardContent>\n                        <Typography variant=\"h4\" color=\"info.dark\">{analysisResult.riscos_medios}</Typography>\n                        <Typography variant=\"body2\">M√©dios</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                  <Grid item xs={3}>\n                    <Card sx={{ textAlign: 'center', bgcolor: 'success.light' }}>\n                      <CardContent>\n                        <Typography variant=\"h4\" color=\"success.dark\">{analysisResult.riscos_baixos}</Typography>\n                        <Typography variant=\"body2\">Baixos</Typography>\n                      </CardContent>\n                    </Card>\n                  </Grid>\n                </Grid>\n\n                {/* Detailed Risk List */}\n                <Typography variant=\"h6\" gutterBottom>\n                  üîç Riscos Detalhados\n                </Typography>\n                {analysisResult.riscos_encontrados.map((risco: RiscoDetalhado, index: number) => (\n                  <Card \n                    key={index} \n                    sx={{ \n                      mb: 2,\n                      border: `2px solid ${getConfidenceColor(risco.severidade)}`,\n                    }}\n                  >\n                    <CardContent>\n                      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', mb: 2 }}>\n                        <Box sx={{ flex: 1 }}>\n                          <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                            <Typography variant=\"body2\" sx={{ mr: 1 }}>\n                              {RiskAnalysisService.getCategoryIcon(risco.categoria)}\n                            </Typography>\n                            <Chip \n                              label={risco.categoria}\n                              size=\"small\"\n                              color={risco.categoria === 'CONFORMIDADE' ? 'success' : 'default'}\n                            />\n                            <Chip \n                              label={`Severidade: ${risco.severidade}/5`}\n                              size=\"small\"\n                              sx={{ ml: 1, bgcolor: getConfidenceColor(risco.severidade), color: 'white' }}\n                            />\n                          </Box>\n                          \n                          <Typography variant=\"h6\" gutterBottom>\n                            {risco.tipo_risco}\n                          </Typography>\n                          \n                          <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n                            <strong>Descri√ß√£o:</strong> {risco.descricao}\n                          </Typography>\n                          \n                          <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\n                            <strong>Evid√™ncia:</strong> {risco.evidencia}\n                          </Typography>\n                          \n                          <Typography variant=\"body2\" color=\"error\" paragraph>\n                            <strong>Impacto Potencial:</strong> {risco.impacto_potencial}\n                          </Typography>\n                          \n                          <Typography variant=\"body2\" color=\"primary\" paragraph>\n                            <strong>Plano de A√ß√£o:</strong> {risco.plano_acao}\n                          </Typography>\n                        </Box>\n\n                        {/* Feedback Mechanism */}\n                        <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', ml: 2 }}>\n                          <Typography variant=\"caption\" sx={{ mb: 1 }}>\n                            Esta an√°lise foi √∫til?\n                          </Typography>\n                          <Box sx={{ display: 'flex', gap: 1 }}>\n                            <Tooltip title=\"An√°lise √∫til\">\n                              <IconButton\n                                size=\"small\"\n                                color={feedback[index] === 'positive' ? 'success' : 'default'}\n                                onClick={() => handleFeedback(index, 'positive')}\n                              >\n                                <ThumbUp />\n                              </IconButton>\n                            </Tooltip>\n                            <Tooltip title=\"An√°lise n√£o √∫til\">\n                              <IconButton\n                                size=\"small\"\n                                color={feedback[index] === 'negative' ? 'error' : 'default'}\n                                onClick={() => handleFeedback(index, 'negative')}\n                              >\n                                <ThumbDown />\n                              </IconButton>\n                            </Tooltip>\n                          </Box>\n                          {feedback[index] && (\n                            <Typography variant=\"caption\" sx={{ mt: 1, color: 'text.secondary' }}>\n                              Obrigado pelo feedback!\n                            </Typography>\n                          )}\n                        </Box>\n                      </Box>\n                    </CardContent>\n                  </Card>\n                ))}\n              </Paper>\n            )}\n          </Paper>\n        </Grid>\n\n        <Grid item xs={12} md={4}>\n          <Paper sx={{ p: 3 }}>\n            <Typography variant=\"h6\" gutterBottom>\n              üìà Hist√≥rico de An√°lises\n            </Typography>\n            \n            {riskHistory.length > 0 ? (\n              riskHistory.map((analise, index) => (\n                <Card key={analise.id} sx={{ mb: 2 }}>\n                  <CardContent sx={{ p: 2, \"&:last-child\": { pb: 2 } }}>\n                    <Box sx={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", mb: 1 }}>\n                      <Typography variant=\"body2\" color=\"text.secondary\">\n                        {new Date(analise.data_analise).toLocaleDateString('pt-BR')}\n                      </Typography>\n                      <Typography variant=\"h6\" color=\"primary\">\n                        {analise.score_risco}/100\n                      </Typography>\n                    </Box>\n                    \n                    <Chip \n                      label={analise.relatorio_resumo.nivel_risco}\n                      size=\"small\"\n                      color={\n                        analise.relatorio_resumo.nivel_risco === 'BAIXO' ? 'success' : \n                        analise.relatorio_resumo.nivel_risco === 'M√âDIO' ? 'warning' : 'error'\n                      }\n                      sx={{ mb: 1 }}\n                    />\n                    \n                    <Typography variant=\"body2\" color=\"text.secondary\">\n                      {analise.relatorio_resumo.total_riscos} riscos identificados\n                    </Typography>\n                    \n                    {/* Category breakdown */}\n                    <Box sx={{ display: 'flex', gap: 0.5, flexWrap: 'wrap', mt: 1 }}>\n                      {Object.entries(analise.relatorio_resumo.categorias).map(([categoria, count]) => (\n                        count > 0 && (\n                          <Chip\n                            key={categoria}\n                            label={`${categoria}: ${count}`}\n                            size=\"small\"\n                            variant=\"outlined\"\n                            sx={{ fontSize: '0.6rem', height: '16px' }}\n                          />\n                        )\n                      ))}\n                    </Box>\n                  </CardContent>\n                </Card>\n              ))\n            ) : (\n              <Alert severity=\"info\">\n                <Typography variant=\"body2\">\n                  Nenhuma an√°lise anterior encontrada. Execute uma an√°lise para come√ßar o hist√≥rico.\n                </Typography>\n              </Alert>\n            )}\n          </Paper>\n\n          <Paper sx={{ p: 3, mt: 3 }}>\n            <Typography variant=\"h6\" gutterBottom>\n              ‚ÑπÔ∏è Como Funciona\n            </Typography>\n            <List dense>\n              <ListItem>\n                <ListItemText \n                  primary=\"1. Agrega√ß√£o de Dados\"\n                  secondary=\"Coleta dados dos √∫ltimos 12-24 meses da empresa\"\n                />\n              </ListItem>\n              <Divider />\n              <ListItem>\n                <ListItemText \n                  primary=\"2. An√°lise de Conformidade\"\n                  secondary=\"Verifica conformidade trabalhista e fiscal\"\n                />\n              </ListItem>\n              <Divider />\n              <ListItem>\n                <ListItemText \n                  primary=\"3. Detec√ß√£o de Padr√µes\"\n                  secondary=\"IA identifica anomalias e riscos ocultos\"\n                />\n              </ListItem>\n              <Divider />\n              <ListItem>\n                <ListItemText \n                  primary=\"4. Recomenda√ß√µes\"\n                  secondary=\"Gera planos de a√ß√£o espec√≠ficos\"\n                />\n              </ListItem>\n            </List>\n          </Paper>\n        </Grid>\n      </Grid>\n\n      {/* Drill-Down Modal for Risk Factor Details */}\n      <Modal\n        open={drillDownModal}\n        onClose={() => setDrillDownModal(false)}\n        aria-labelledby=\"drill-down-modal\"\n      >\n        <Box sx={{\n          position: 'absolute',\n          top: '50%',\n          left: '50%',\n          transform: 'translate(-50%, -50%)',\n          width: 600,\n          bgcolor: 'background.paper',\n          borderRadius: 2,\n          boxShadow: 24,\n          p: 4,\n          maxHeight: '80vh',\n          overflow: 'auto'\n        }}>\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n            <Typography variant=\"h6\" component=\"h2\">\n              üìä An√°lise Detalhada: {selectedRisk?.factor}\n            </Typography>\n            <IconButton onClick={() => setDrillDownModal(false)}>\n              <Close />\n            </IconButton>\n          </Box>\n          \n          {selectedRisk && (\n            <Box>\n              <Alert severity=\"info\" sx={{ mb: 2 }}>\n                <Typography variant=\"body2\">\n                  Dados hist√≥ricos dos √∫ltimos 5 meses para o fator de risco \"{selectedRisk.factor}\"\n                </Typography>\n              </Alert>\n              \n              {/* Mock chart data - in real implementation would use recharts */}\n              <Paper sx={{ p: 2, bgcolor: 'grey.50' }}>\n                <Typography variant=\"subtitle2\" gutterBottom>\n                  Tend√™ncia Temporal\n                </Typography>\n                {selectedRisk.historicalData.map((data: any, index: number) => (\n                  <Box key={index} sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n                    <Typography variant=\"body2\" sx={{ minWidth: 40 }}>\n                      {data.month}:\n                    </Typography>\n                    <LinearProgress \n                      variant=\"determinate\" \n                      value={(data.value / 35) * 100} \n                      sx={{ flex: 1, ml: 1, mr: 1 }}\n                    />\n                    <Typography variant=\"body2\" sx={{ minWidth: 30 }}>\n                      {data.value}\n                    </Typography>\n                  </Box>\n                ))}\n              </Paper>\n              \n              <Box sx={{ mt: 2 }}>\n                <Typography variant=\"subtitle2\" gutterBottom>\n                  Recomenda√ß√µes Espec√≠ficas\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  ‚Ä¢ Monitorar varia√ß√µes acima de 20% em rela√ß√£o ao m√™s anterior\n                  ‚Ä¢ Revisar pol√≠ticas internas relacionadas a este fator\n                  ‚Ä¢ Considerar automa√ß√£o para reduzir erros manuais\n                </Typography>\n              </Box>\n            </Box>\n          )}\n        </Box>\n      </Modal>\n      </Container>\n    </>\n  );\n};\n\nexport default ConsultorRiscos;"],"names":["RiskAnalysisService","request","response","api","error","_a","_b","_c","empresa_id","limit","severidade","nivel_risco","categoria","score","score_atual","score_anterior","diff","ConsultorRiscos","selectedEmpresaId","setSelectedEmpresaId","useState","isAnalyzing","setIsAnalyzing","analysisResult","setAnalysisResult","analysisError","setAnalysisError","selectedRisk","setSelectedRisk","drillDownModal","setDrillDownModal","feedback","setFeedback","riskHistory","setRiskHistory","useEffect","loadRiskHistory","history","handleAnalyze","result","handleFeedback","riskId","type","prev","err","getConfidenceColor","getTrendIcon","TrendingFlat","jsx","TrendingUp","TrendingDown","Fragment","jsxs","Container","Box","Typography","Grid","Paper","FormControl","InputLabel","Select","e","MenuItem","Button","CircularProgress","Assessment","step","status","LinearProgress","Alert","Business","Chip","Card","CardContent","risco","index","Tooltip","IconButton","ThumbUp","ThumbDown","analise","count","List","ListItem","ListItemText","Divider","Modal","Close","data"],"mappings":"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"}