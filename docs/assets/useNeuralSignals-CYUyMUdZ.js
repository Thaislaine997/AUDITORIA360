import{r as p}from"./vendor-Cr2nE3UY.js";import{d as w}from"./index-BXWjdBQQ.js";import{c as E}from"./utils-Bo08wi2s.js";const y=E()(w((a,s)=>({mousePatterns:[],typingPatterns:[],hoverDuration:{},currentIntentions:[],intentionHistory:[],cognitiveLoad:{level:"low",indicators:{mouseHesitation:0,errorFrequency:0,navigationPatterns:0,typingStress:0},adaptationRequired:!1},errorCount:{},preloadedData:{},speculativeRendering:{},recordMouseMovement:(e,t)=>{const o=Date.now(),c=s().mousePatterns,r=c[c.length-1];let l=0;if(r){const i=o-r.timestamp;l=Math.sqrt(Math.pow(e-r.x,2)+Math.pow(t-r.y,2))/(i||1)}const n={x:e,y:t,timestamp:o,velocity:l};a(i=>({mousePatterns:[...i.mousePatterns.slice(-50),n]})),l<10&&c.length>5&&c.slice(-5).filter(u=>u.velocity<15).length>=4&&s().updateCognitiveLoad()},recordHover:(e,t)=>{a(o=>({hoverDuration:{...o.hoverDuration,[e]:t}})),t>500&&(s().detectIntention("action",e,{hoverDuration:t}),e.includes("payroll")||e.includes("folha")?s().requestPreload("payroll_data",{elementId:e}):(e.includes("client")||e.includes("cliente"))&&s().requestPreload("client_data",{elementId:e}))},recordKeypress:e=>{const t=Date.now(),o=s().typingPatterns,c=o[o.length-1],r=c?t-c.timestamp:0,l={keystroke:e,timestamp:t,interval:r};if(a(n=>({typingPatterns:[...n.typingPatterns.slice(-20),l]})),o.length>=5){const n=o.slice(-5).map(u=>u.interval).filter(u=>u>0),i=n.reduce((u,v)=>u+v,0)/n.length;(i<50||i>1e3)&&s().updateCognitiveLoad()}},recordError:(e,t)=>{a(o=>({errorCount:{...o.errorCount,[e]:(o.errorCount[e]||0)+1}})),s().updateCognitiveLoad()},detectIntention:(e,t,o={})=>{const c=Date.now(),r=s().mousePatterns,l=s().hoverDuration;let n=.5;l[t]>500&&(n+=.3),l[t]>1e3&&(n+=.2);const i=r.slice(-10);i.reduce((d,h)=>d+h.velocity,0)/i.length<20&&(n+=.2);const v={id:`${e}_${t}_${c}`,type:e,target:t,confidence:Math.min(n,1),timestamp:c,context:o};a(d=>({currentIntentions:[...d.currentIntentions.slice(-5),v],intentionHistory:[...d.intentionHistory.slice(-50),v]})),n>.7&&s().sendIntentionToAPI(v)},updateCognitiveLoad:()=>{const e=s(),{mousePatterns:t,errorCount:o,typingPatterns:c}=e,r=t.slice(-20),l=r.filter(f=>f.velocity<10).length/r.length,i=Object.values(o).reduce((f,P)=>f+P,0)/Math.max(Object.keys(o).length,1),u=c.slice(-10),v=u.filter(f=>f.interval<100||f.interval>800).length/u.length,d={mouseHesitation:l,errorFrequency:i,navigationPatterns:0,typingStress:v},h=(l+i+v)/3;let m="low";h>.7?m="high":h>.4&&(m="medium");const g=m==="high"||i>2;a({cognitiveLoad:{level:m,indicators:d,adaptationRequired:g}})},requestPreload:(e,t)=>{console.log(`ðŸ§  Neuro-Symbolic: Pre-loading ${e}`,t),setTimeout(()=>{a(o=>({preloadedData:{...o.preloadedData,[e]:{...t,data:`Pre-loaded data for ${e}`,timestamp:Date.now()}}}))},100)},shouldShowEmpathicHelp:e=>(s().errorCount[e]||0)>=3,shouldAdaptUI:()=>s().cognitiveLoad.adaptationRequired,getNavigationPredictions:()=>{const{intentionHistory:e,currentIntentions:t}=s(),o={},c=e.slice(-10).map(n=>n.target),r=c.reduce((n,i)=>(n[i]=(n[i]||0)+1,n),{}),l=c.length;return Object.keys(r).forEach(n=>{o[n]=r[n]/l}),o},sendIntentionToAPI:async e=>{try{await fetch("/api/intentions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(t){console.warn("Failed to send intention to API:",t)}},reset:()=>{a({mousePatterns:[],typingPatterns:[],hoverDuration:{},currentIntentions:[],errorCount:{},preloadedData:{},speculativeRendering:{},cognitiveLoad:{level:"low",indicators:{mouseHesitation:0,errorFrequency:0,navigationPatterns:0,typingStress:0},adaptationRequired:!1}})}}),{name:"intention-store"})),D=()=>{const{recordMouseMovement:a,recordHover:s,recordKeypress:e,detectIntention:t,updateCognitiveLoad:o}=y(),c=p.useRef({}),r=p.useRef({});return p.useEffect(()=>{const n=i=>{a(i.clientX,i.clientY)};return document.addEventListener("mousemove",n,{passive:!0}),()=>{document.removeEventListener("mousemove",n)}},[a]),p.useEffect(()=>{const n=i=>{if(e(i.key),i.key==="Enter"){const u=i.target;(u.tagName==="INPUT"||u.tagName==="TEXTAREA")&&t("form_submission",u.id||u.name||"unknown_field")}};return document.addEventListener("keydown",n,{passive:!0}),()=>{document.removeEventListener("keydown",n)}},[e,t]),{trackHover:p.useCallback((n,i)=>{const u=()=>{r.current[n]=Date.now(),c.current[n]=setTimeout(()=>{const d=Date.now()-r.current[n];s(n,d),(n.includes("payroll")||n.includes("folha"))&&t("data_view",n,{type:"payroll_preview",hoverDuration:d})},500)},v=()=>{c.current[n]&&clearTimeout(c.current[n]);const d=r.current[n];if(d){const h=Date.now()-d;s(n,h)}};return i.addEventListener("mouseenter",u),i.addEventListener("mouseleave",v),()=>{i.removeEventListener("mouseenter",u),i.removeEventListener("mouseleave",v),c.current[n]&&clearTimeout(c.current[n])}},[s,t]),updateCognitiveLoad:o}},A=(a,s="action")=>{const e=p.useRef(null),{trackHover:t}=D();return p.useEffect(()=>{const o=e.current;if(o)return t(a,o)},[a,t]),e},T=a=>{const{recordError:s,shouldShowEmpathicHelp:e}=y(),t=p.useCallback(c=>{s(a,c)},[a,s]),o=e(a);return{recordFormError:t,needsEmpathicHelp:o}},k=()=>{const{shouldAdaptUI:a,cognitiveLoad:s}=y(),e=a(),t=s.level;return{shouldSimplify:e,loadLevel:t,adaptationStrategy:t==="high"?{hideAdvancedFeatures:!0,highlightPrimaryActions:!0,showHelpHints:!0,reduceAnimations:!0}:t==="medium"?{hideAdvancedFeatures:!1,highlightPrimaryActions:!0,showHelpHints:!1,reduceAnimations:!1}:{hideAdvancedFeatures:!1,highlightPrimaryActions:!1,showHelpHints:!1,reduceAnimations:!1},cognitiveLoad:s}},b=()=>{const{preloadedData:a,getNavigationPredictions:s,requestPreload:e}=y(),t=s(),o=p.useCallback(()=>{Object.entries(t).forEach(([r,l])=>{l>.9&&(r.includes("client")||r.includes("cliente")?e("client_data",{target:r}):r.includes("dashboard")?e("dashboard_metrics",{target:r}):(r.includes("payroll")||r.includes("folha"))&&e("payroll_data",{target:r}))})},[t,e]),c=p.useCallback(r=>a[r]&&Date.now()-a[r].timestamp<3e4,[a]);return{predictions:t,preloadedData:a,preloadHighProbabilityTargets:o,isDataPreloaded:c}};export{k as a,y as b,A as c,T as d,b as u};
//# sourceMappingURL=useNeuralSignals-CYUyMUdZ.js.map
