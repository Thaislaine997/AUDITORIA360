import{j as e,d as t,e as n,k as l,aS as K,G as D,ar as X,as as Q,o as B,ab as d,I as p,aC as Y,aU as ee,aV as ae,aW as se,D as S,r as w,s as E,O as z,z as te,H as ie,J as ne,K as o,P as I,aD as le,L as oe,l as re,aX as ce,m as de,p as pe}from"./mui-CJAnL3-O.js";import{r as s}from"./vendor-Cr2nE3UY.js";import{E as ue}from"./ExportButton-R-xP34H0.js";const fe=()=>{const[u,x]=s.useState([]),[P,R]=s.useState([]),[r,g]=s.useState(null),[F,L]=s.useState([]),[G,c]=s.useState(!1),[xe,A]=s.useState(!1),[O,m]=s.useState(!1),[T,C]=s.useState(!1),[h,j]=s.useState(""),[v,f]=s.useState(""),[b,y]=s.useState("financial");s.useEffect(()=>{W(),N()},[]);const W=async()=>{x([{id:1,name:"Relatório Financeiro Básico",description:"Template padrão para relatórios financeiros",type:"financial",is_default:!0,is_active:!0,usage_count:15,created_at:"2024-01-01T00:00:00Z"},{id:2,name:"Análise de Despesas Detalhada",description:"Template customizado para análise detalhada de despesas",type:"financial",is_default:!1,is_active:!0,usage_count:8,created_at:"2024-01-05T10:30:00Z"}])},N=async()=>{R([{type:"header",name:"Cabeçalho",description:"Cabeçalho do relatório com logo e informações básicas",icon:"header"},{type:"expense_analysis",name:"Análise de Despesas",description:"Gráficos e tabelas de análise de despesas",icon:"chart-bar"},{type:"balance_sheet",name:"Balanço Patrimonial Simplificado",description:"Resumo do balanço patrimonial",icon:"balance-scale"},{type:"monthly_revenue_chart",name:"Gráfico de Faturamento Mensal",description:"Gráfico de evolução do faturamento",icon:"chart-line"}])},V=async()=>{C(!0),setTimeout(()=>{const a={id:Date.now(),name:h,description:v,type:b,is_default:!1,is_active:!0,usage_count:0,created_at:new Date().toISOString()};x([...u,a]),c(!1),j(""),f(""),y("financial"),C(!1)},1e3)},M=a=>{g(a),j(a.name),f(a.description||""),y(a.type),A(!0)},U=async a=>{g(a),L([{id:1,block_type:"header",title:"Cabeçalho do Relatório",position_order:1,width_percentage:100},{id:2,block_type:"expense_analysis",title:"Análise de Despesas",position_order:2,width_percentage:100}]),m(!0)},Z=async a=>{window.confirm("Tem certeza que deseja excluir este template?")&&x(u.filter(i=>i.id!==a))},_=async a=>{console.log("Generating report with template:",a.name)},$=async()=>{console.log("Exporting templates to PDF")},q=async()=>{console.log("Exporting templates to CSV")},H=a=>{switch(a){case"financial":return"Financeiro";case"payroll":return"Folha";case"compliance":return"Compliance";case"audit":return"Auditoria";default:return"Personalizado"}},k=a=>{const i=P.find(J=>J.type===a);return i?i.name:a};return e.jsxs(t,{sx:{p:3},children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(n,{variant:"h4",gutterBottom:!0,children:"Modelos de Relatório"}),e.jsxs(t,{sx:{display:"flex",gap:2},children:[e.jsx(ue,{onExportPdf:$,onExportCsv:q}),e.jsx(l,{variant:"contained",startIcon:e.jsx(K,{}),onClick:()=>c(!0),children:"Novo Template"})]})]}),e.jsx(D,{container:!0,spacing:3,children:u.map(a=>e.jsx(D,{item:!0,xs:12,md:6,lg:4,children:e.jsx(X,{children:e.jsxs(Q,{children:[e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:a.name}),e.jsxs(t,{sx:{display:"flex",gap:1},children:[a.is_default&&e.jsx(B,{label:"Padrão",size:"small",color:"primary"}),e.jsx(B,{label:H(a.type),size:"small",variant:"outlined"})]})]}),e.jsx(n,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:a.description}),e.jsxs(n,{variant:"caption",display:"block",sx:{mt:1,mb:2},children:["Usado ",a.usage_count," vezes"]}),e.jsxs(t,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(t,{children:[e.jsx(d,{title:"Visualizar",children:e.jsx(p,{size:"small",onClick:()=>U(a),children:e.jsx(Y,{})})}),e.jsx(d,{title:"Editar",children:e.jsx(p,{size:"small",onClick:()=>M(a),children:e.jsx(ee,{})})}),e.jsx(d,{title:"Duplicar",children:e.jsx(p,{size:"small",children:e.jsx(ae,{})})}),!a.is_default&&e.jsx(d,{title:"Excluir",children:e.jsx(p,{size:"small",color:"error",onClick:()=>Z(a.id),children:e.jsx(se,{})})})]}),e.jsx(l,{size:"small",variant:"outlined",onClick:()=>_(a),children:"Gerar Relatório"})]})]})})},a.id))}),e.jsxs(S,{open:G,onClose:()=>c(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(w,{children:"Criar Novo Template"}),e.jsx(E,{children:e.jsxs(t,{sx:{display:"flex",flexDirection:"column",gap:2,mt:1},children:[e.jsx(z,{label:"Nome do Template",value:h,onChange:a=>j(a.target.value),fullWidth:!0}),e.jsx(z,{label:"Descrição",value:v,onChange:a=>f(a.target.value),multiline:!0,rows:3,fullWidth:!0}),e.jsxs(te,{fullWidth:!0,children:[e.jsx(ie,{children:"Tipo do Relatório"}),e.jsxs(ne,{value:b,onChange:a=>y(a.target.value),children:[e.jsx(o,{value:"financial",children:"Financeiro"}),e.jsx(o,{value:"payroll",children:"Folha de Pagamento"}),e.jsx(o,{value:"compliance",children:"Compliance"}),e.jsx(o,{value:"audit",children:"Auditoria"}),e.jsx(o,{value:"custom",children:"Personalizado"})]})]})]})}),e.jsxs(I,{children:[e.jsx(l,{onClick:()=>c(!1),children:"Cancelar"}),e.jsx(l,{onClick:V,variant:"contained",disabled:!h||T,children:T?"Criando...":"Criar Template"})]})]}),e.jsxs(S,{open:O,onClose:()=>m(!1),maxWidth:"lg",fullWidth:!0,children:[e.jsxs(w,{children:["Visualizar Template: ",r==null?void 0:r.name]}),e.jsx(E,{children:e.jsxs(le,{sx:{p:2,bgcolor:"grey.50"},children:[e.jsx(n,{variant:"h6",gutterBottom:!0,children:"Blocos do Relatório"}),e.jsx(oe,{children:F.map((a,i)=>e.jsxs(re,{sx:{bgcolor:"white",mb:1,borderRadius:1},children:[e.jsx(ce,{sx:{mr:2,color:"text.secondary"}}),e.jsx(de,{primary:a.title||k(a.block_type),secondary:`Tipo: ${k(a.block_type)} | Largura: ${a.width_percentage}%`}),e.jsx(pe,{children:e.jsxs(n,{variant:"caption",color:"text.secondary",children:["#",a.position_order]})})]},a.id))})]})}),e.jsxs(I,{children:[e.jsx(l,{onClick:()=>m(!1),children:"Fechar"}),e.jsx(l,{variant:"contained",onClick:()=>_(r),children:"Gerar Relatório"})]})]})]})};export{fe as default};
//# sourceMappingURL=ReportTemplatesPage-pxv11sRo.js.map
