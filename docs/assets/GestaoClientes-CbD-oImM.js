import{j as e,aA as k,d as r,e as l,aD as Y,t as Z,af as ee,k as j,ah as v,aS as ae,aI as se,aJ as te,aK as ie,aL as z,aM as t,aN as ne,a7 as le,o as oe,I as x,aU as re,aC as ce,ab as de,b5 as he,aW as ue,D as xe,r as me,s as je,G as o,O as d,z as B,H as P,J as W,K as p,P as pe}from"./mui-CJAnL3-O.js";import{r as h}from"./vendor-Cr2nE3UY.js";import{u as fe,a as ve}from"./index-BXWjdBQQ.js";import{u as ye,b as be,c as F}from"./useNeuralSignals-CYUyMUdZ.js";import"./utils-Bo08wi2s.js";const we=()=>{const{user:s}=fe(),{unlockAchievement:y,addXP:$}=ve(),{isDataPreloaded:G,preloadedData:R}=ye(),{currentIntentions:b}=be(),[V,u]=h.useState(!1),[g,C]=h.useState(null),[c,S]=h.useState(null),[f,A]=h.useState(!1),[L,_]=h.useState(!1),J=F("payroll_button_client_1","data_view"),H=F("payroll_button_client_2","data_view"),[m,K]=h.useState([{id:"1",nomeEmpresa:"TechCorp Solu√ß√µes",cnpj:"11.222.333/0001-44",responsavel:"Carlos Oliveira",email:"carlos@techcorp.com.br",telefone:"(11) 99999-0000",contabilidade:"Contabilidade Alpha",funcionarios:45,status:"ativo"},{id:"2",nomeEmpresa:"Inova√ß√£o Ltda",cnpj:"55.666.777/0001-88",responsavel:"Ana Costa",email:"ana@inovacao.com.br",telefone:"(11) 88888-1111",contabilidade:"Beta Assessoria",funcionarios:23,status:"ativo"}]);if(!((s==null?void 0:s.role)==="super_admin"||(s==null?void 0:s.role)==="contabilidade"))return e.jsx(k,{maxWidth:"xl",children:e.jsxs(r,{sx:{textAlign:"center",mt:8},children:[e.jsx(l,{variant:"h5",color:"error",children:"Acesso Negado"}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"Esta funcionalidade √© restrita a Gestores e Super Administradores."})]})});const M=a=>{C(a),u(!0)},O=()=>{C(null),u(!0)},q=a=>{confirm("Tem certeza que deseja excluir este cliente?")&&K(i=>i.filter(n=>n.id!==a))},U=async()=>{try{A(!0);const i=await(await fetch("http://localhost:8001/api/core/system/health")).json();S(i)}catch(a){console.error("Failed to check system health:",a),S({success:!1,error:"Connection failed"})}finally{A(!1)}},X=async a=>{try{const n=await(await fetch(`http://localhost:8001/api/core/business-flow/${a}`)).json();n.success?alert(`Business flow activated for ${n.data.client.name}! 
Context ID: ${n.data.system_health.context_id}
Available actions: ${n.data.available_actions.join(", ")}`):alert(`Failed to activate business flow: ${n.message}`)}catch(i){alert(`Error: ${i}`)}},Q=async a=>{const i="payroll_data";if(G(i)){const n=R[i];_(!0),setTimeout(()=>{var w,T,D,E,N;alert(`üß† Neuro-Symbolic Interface: Folha de pagamento carregada instantaneamente!

Dados pr√©-carregados detectando sua inten√ß√£o:
‚Ä¢ ${((T=(w=n.data)==null?void 0:w.summary)==null?void 0:T.total_employees)||"N/A"} funcion√°rios
‚Ä¢ Total sal√°rios: R$ ${((E=(D=n.data)==null?void 0:D.summary)==null?void 0:E.total_salary)||"N/A"}
‚Ä¢ Tempo de carregamento: ${((N=n.metadata)==null?void 0:N.estimated_load_time)||"<50ms"}

A interface leu seus sinais neurais e preparou os dados antes do clique!`),_(!1)},30)}else alert("Carregando folha de pagamento... (modo tradicional)")},I=(s==null?void 0:s.role)==="super_admin"?m:m.filter(a=>!0);return e.jsxs(k,{maxWidth:"xl",children:[e.jsxs(r,{sx:{mb:4},children:[e.jsx(l,{variant:"h4",component:"h1",gutterBottom:!0,children:"Gest√£o de Clientes"}),e.jsx(l,{variant:"subtitle1",color:"text.secondary",children:(s==null?void 0:s.role)==="super_admin"?"Gerencie todos os clientes do sistema.":"Gerencie os clientes da sua contabilidade."})]}),e.jsxs(Y,{sx:{p:3},children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(l,{variant:"h6",children:["Clientes Cadastrados (",I.length,")"]}),e.jsxs(r,{sx:{display:"flex",gap:2},children:[b.length>0&&e.jsxs(Z,{severity:"info",icon:e.jsx(ee,{}),sx:{mr:2,animation:L?"pulse 1s infinite":"none","@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.7},"100%":{opacity:1}}},children:["üß† Interface Neural Ativa - ",b.length," inten√ß√£o(√µes) detectada(s)"]}),e.jsx(j,{variant:"outlined",startIcon:f?void 0:e.jsx(v,{}),onClick:U,disabled:f,color:"info",children:f?"Verificando...":"Status do Sistema"}),e.jsx(j,{variant:"contained",startIcon:e.jsx(ae,{}),onClick:O,children:"Novo Cliente"})]})]}),c&&e.jsxs(r,{sx:{mb:3,p:2,bgcolor:c.success?"success.light":"error.light",borderRadius:1},children:[e.jsx(l,{variant:"subtitle2",gutterBottom:!0,children:"Status do Sistema Integrado:"}),c.success?e.jsxs(l,{variant:"body2",children:["‚úÖ Core System: ",c.health.core_system.initialized?"Inicializado":"N√£o inicializado"," | Cache: ",c.health.components.cache," | Auth: ",c.health.components.authentication]}):e.jsxs(l,{variant:"body2",color:"error",children:["‚ùå Sistema offline: ",c.error||"Conex√£o falhou"]})]}),e.jsx(se,{children:e.jsxs(te,{children:[e.jsx(ie,{children:e.jsxs(z,{children:[e.jsx(t,{children:"Empresa"}),e.jsx(t,{children:"CNPJ"}),e.jsx(t,{children:"Respons√°vel"}),e.jsx(t,{children:"Contato"}),(s==null?void 0:s.role)==="super_admin"&&e.jsx(t,{children:"Contabilidade"}),e.jsx(t,{children:"Funcion√°rios"}),e.jsx(t,{children:"Status"}),e.jsx(t,{align:"center",children:"A√ß√µes"})]})}),e.jsx(ne,{children:I.map((a,i)=>e.jsxs(z,{children:[e.jsx(t,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(v,{color:"primary"}),a.nomeEmpresa]})}),e.jsx(t,{children:a.cnpj}),e.jsx(t,{children:e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(le,{fontSize:"small"}),a.responsavel]})}),e.jsx(t,{children:e.jsxs(r,{children:[e.jsx(l,{variant:"body2",children:a.email}),e.jsx(l,{variant:"caption",color:"text.secondary",children:a.telefone})]})}),(s==null?void 0:s.role)==="super_admin"&&e.jsx(t,{children:a.contabilidade}),e.jsx(t,{children:a.funcionarios}),e.jsx(t,{children:e.jsx(oe,{label:a.status,color:a.status==="ativo"?"success":"error",size:"small"})}),e.jsxs(t,{align:"center",children:[e.jsx(x,{size:"small",color:"primary",onClick:()=>M(a.id),title:"Editar Cliente",children:e.jsx(re,{})}),e.jsx(x,{size:"small",color:"info",title:"Visualizar Detalhes",children:e.jsx(ce,{})}),e.jsx(de,{title:"Ver Folhas de Pagamento (Neural Interface)",children:e.jsx(x,{ref:i===0?J:H,size:"small",color:"warning",onClick:()=>Q(a.id),sx:{"&:hover":{backgroundColor:"warning.light",transform:"scale(1.1)",transition:"all 0.2s ease-in-out"}},children:e.jsx(he,{})})}),e.jsx(x,{size:"small",color:"success",onClick:()=>X(a.id),title:"Ativar Fluxo de Neg√≥cio",children:e.jsx(v,{})}),e.jsx(x,{size:"small",color:"error",onClick:()=>q(a.id),title:"Excluir Cliente",children:e.jsx(ue,{})})]})]},a.id))})]})})]}),e.jsxs(xe,{open:V,onClose:()=>u(!1),maxWidth:"md",fullWidth:!0,children:[e.jsx(me,{children:g?"Editar Cliente":"Novo Cliente"}),e.jsx(je,{children:e.jsxs(o,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,label:"Nome da Empresa",variant:"outlined"})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,label:"CNPJ",variant:"outlined"})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,label:"Respons√°vel",variant:"outlined"})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,label:"Email",type:"email",variant:"outlined"})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,label:"Telefone",variant:"outlined"})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,label:"N√∫mero de Funcion√°rios",type:"number",variant:"outlined"})}),(s==null?void 0:s.role)==="super_admin"&&e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(B,{fullWidth:!0,children:[e.jsx(P,{children:"Contabilidade"}),e.jsxs(W,{label:"Contabilidade",defaultValue:"",children:[e.jsx(p,{value:"alpha",children:"Contabilidade Alpha"}),e.jsx(p,{value:"beta",children:"Beta Assessoria"})]})]})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(B,{fullWidth:!0,children:[e.jsx(P,{children:"Status"}),e.jsxs(W,{label:"Status",defaultValue:"ativo",children:[e.jsx(p,{value:"ativo",children:"Ativo"}),e.jsx(p,{value:"inativo",children:"Inativo"})]})]})})]})}),e.jsxs(pe,{children:[e.jsx(j,{onClick:()=>u(!1),children:"Cancelar"}),e.jsx(j,{variant:"contained",onClick:()=>{u(!1),$(50,"Cliente cadastrado"),(m.length===0||!g)&&y("first_client_config"),m.length+1>=10&&y("client_master")},children:"Salvar"})]})]})]})};export{we as default};
//# sourceMappingURL=GestaoClientes-CbD-oImM.js.map
