<!doctype html>

<html lang="pt-BR" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>src.mcp.config &#8212; Documentação AUDITORIA360 1.0.0</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="../../../_static/pygments.css?v=d1102ebc"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="../../../_static/basic.css?v=b08954a9"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="../../../_static/alabaster.css?v=27fed22d"
    />
    <script src="../../../_static/documentation_options.js?v=c0c8e3fa"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/translations.js?v=71a39b36"></script>
    <link rel="index" title="Índice" href="../../../genindex.html" />
    <link rel="search" title="Buscar" href="../../../search.html" />

    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  </head>
  <body>
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            <h1>Código-fonte para src.mcp.config</h1>
            <div class="highlight">
              <pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">MCP Configuration Management for AUDITORIA360</span>
<span class="sd">Handles configuration for MCP servers, clients, and development environment</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">enum</span> <span class="kn">import</span> <span class="n">Enum</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Optional</span>

<span class="kn">import</span> <span class="nn">yaml</span>
<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="n">BaseModel</span><span class="p">,</span> <span class="n">Field</span>

<span class="kn">from</span> <span class="nn">.protocol</span> <span class="kn">import</span> <span class="n">MCPVersion</span>


<div class="viewcode-block" id="MCPTransportType">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPTransportType">[documentos]</a>
<span class="k">class</span> <span class="nc">MCPTransportType</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Supported MCP transport types&quot;&quot;&quot;</span>

    <span class="n">HTTP</span> <span class="o">=</span> <span class="s2">&quot;http&quot;</span>
    <span class="n">WEBSOCKET</span> <span class="o">=</span> <span class="s2">&quot;websocket&quot;</span>
    <span class="n">STDIO</span> <span class="o">=</span> <span class="s2">&quot;stdio&quot;</span>
    <span class="n">TCP</span> <span class="o">=</span> <span class="s2">&quot;tcp&quot;</span></div>



<div class="viewcode-block" id="MCPServerConfig">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPServerConfig">[documentos]</a>
<span class="k">class</span> <span class="nc">MCPServerConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for an MCP server&quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">transport</span><span class="p">:</span> <span class="n">MCPTransportType</span>
    <span class="n">host</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;localhost&quot;</span>
    <span class="n">port</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">command</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># For stdio transport</span>
    <span class="n">args</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">env</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">auto_start</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></div>



<div class="viewcode-block" id="MCPClientConfig">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPClientConfig">[documentos]</a>
<span class="k">class</span> <span class="nc">MCPClientConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for an MCP client&quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">target_server</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">auto_connect</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">retry_attempts</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">retry_delay</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></div>



<div class="viewcode-block" id="MCPDevelopmentConfig">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPDevelopmentConfig">[documentos]</a>
<span class="k">class</span> <span class="nc">MCPDevelopmentConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Development environment configuration for MCP&quot;&quot;&quot;</span>

    <span class="n">debug_mode</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">log_level</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;INFO&quot;</span>
    <span class="n">log_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">enable_metrics</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">metrics_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">9090</span>
    <span class="n">enable_health_checks</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">health_check_interval</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">60</span></div>



<div class="viewcode-block" id="CopilotIntegrationConfig">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.CopilotIntegrationConfig">[documentos]</a>
<span class="k">class</span> <span class="nc">CopilotIntegrationConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration for GitHub Copilot integration&quot;&quot;&quot;</span>

    <span class="n">enabled</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">mcp_server_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">tools_enabled</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">resources_enabled</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">context_window_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">8000</span>
    <span class="n">max_tool_calls_per_request</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">enable_streaming</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span></div>



<div class="viewcode-block" id="MCPConfiguration">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPConfiguration">[documentos]</a>
<span class="k">class</span> <span class="nc">MCPConfiguration</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main MCP configuration&quot;&quot;&quot;</span>

    <span class="n">version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;1.0.0&quot;</span>
    <span class="n">protocol_version</span><span class="p">:</span> <span class="n">MCPVersion</span> <span class="o">=</span> <span class="n">MCPVersion</span><span class="o">.</span><span class="n">V1_0</span>

    <span class="c1"># Server configurations</span>
    <span class="n">servers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MCPServerConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="c1"># Client configurations</span>
    <span class="n">clients</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">MCPClientConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="c1"># Development settings</span>
    <span class="n">development</span><span class="p">:</span> <span class="n">MCPDevelopmentConfig</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">MCPDevelopmentConfig</span><span class="p">)</span>

    <span class="c1"># Copilot integration</span>
    <span class="n">copilot</span><span class="p">:</span> <span class="n">CopilotIntegrationConfig</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="n">CopilotIntegrationConfig</span><span class="p">)</span>

    <span class="c1"># Security settings</span>
    <span class="n">security</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="c1"># Feature flags</span>
    <span class="n">features</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span></div>



<div class="viewcode-block" id="MCPConfigManager">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPConfigManager">[documentos]</a>
<span class="k">class</span> <span class="nc">MCPConfigManager</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Manages MCP configuration loading, saving, and validation&quot;&quot;&quot;</span>

<div class="viewcode-block" id="MCPConfigManager.__init__">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPConfigManager.__init__">[documentos]</a>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span>
            <span class="n">config_dir</span> <span class="ow">or</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;configs&quot;</span><span class="p">,</span> <span class="s2">&quot;mcp&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">config_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span> <span class="o">/</span> <span class="s2">&quot;mcp_config.yaml&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">servers_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span> <span class="o">/</span> <span class="s2">&quot;servers&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clients_dir</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_dir</span> <span class="o">/</span> <span class="s2">&quot;clients&quot;</span>

        <span class="c1"># Create subdirectories</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">servers_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clients_dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">MCPConfiguration</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="MCPConfigManager.load_config">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPConfigManager.load_config">[documentos]</a>
    <span class="k">def</span> <span class="nf">load_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MCPConfiguration</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load MCP configuration from file&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">config_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">config_data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">MCPConfiguration</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">config_data</span><span class="p">)</span>

                <span class="c1"># Load additional server configurations</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_load_server_configs</span><span class="p">()</span>

                <span class="c1"># Load additional client configurations</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_load_client_configs</span><span class="p">()</span>

                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error loading MCP configuration: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_default_config</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_default_config</span><span class="p">()</span></div>


<div class="viewcode-block" id="MCPConfigManager.save_config">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPConfigManager.save_config">[documentos]</a>
    <span class="k">def</span> <span class="nf">save_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">:</span> <span class="n">MCPConfiguration</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save MCP configuration to file&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">config</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;No configuration to save&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">config_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">config_data</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="c1"># Save individual server configurations</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_server_configs</span><span class="p">()</span>

            <span class="c1"># Save individual client configurations</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_save_client_configs</span><span class="p">()</span>

            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;MCP configuration saved to </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">config_file</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error saving MCP configuration: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">raise</span></div>


    <span class="k">def</span> <span class="nf">_load_server_configs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load individual server configuration files&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">config_file</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">servers_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.yaml&quot;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">server_data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

                <span class="n">server_config</span> <span class="o">=</span> <span class="n">MCPServerConfig</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">server_data</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">servers</span><span class="p">[</span><span class="n">server_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">server_config</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error loading server config </span><span class="si">{</span><span class="n">config_file</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_load_client_configs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load individual client configuration files&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">config_file</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients_dir</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s2">&quot;*.yaml&quot;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">client_data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

                <span class="n">client_config</span> <span class="o">=</span> <span class="n">MCPClientConfig</span><span class="o">.</span><span class="n">model_validate</span><span class="p">(</span><span class="n">client_data</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">client_config</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error loading client config </span><span class="si">{</span><span class="n">config_file</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_save_server_configs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save individual server configuration files&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">server_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">servers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">config_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">servers_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.yaml&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">server_config</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(),</span> <span class="n">f</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error saving server config </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_save_client_configs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save individual client configuration files&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">client_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">config_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.yaml&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">client_config</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(),</span> <span class="n">f</span><span class="p">,</span> <span class="n">default_flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error saving client config </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_default_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MCPConfiguration</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get default MCP configuration&quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">MCPConfiguration</span><span class="p">()</span>

        <span class="c1"># Add default AUDITORIA360 MCP server</span>
        <span class="n">auditoria_server</span> <span class="o">=</span> <span class="n">MCPServerConfig</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;auditoria360-main&quot;</span><span class="p">,</span>
            <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Main AUDITORIA360 MCP server for payroll and compliance tools&quot;</span><span class="p">,</span>
            <span class="n">transport</span><span class="o">=</span><span class="n">MCPTransportType</span><span class="o">.</span><span class="n">HTTP</span><span class="p">,</span>
            <span class="n">host</span><span class="o">=</span><span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
            <span class="n">port</span><span class="o">=</span><span class="mi">8001</span><span class="p">,</span>
            <span class="n">path</span><span class="o">=</span><span class="s2">&quot;/mcp&quot;</span><span class="p">,</span>
            <span class="n">enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">servers</span><span class="p">[</span><span class="s2">&quot;auditoria360-main&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">auditoria_server</span>

        <span class="c1"># Add default client for self-connection</span>
        <span class="n">auditoria_client</span> <span class="o">=</span> <span class="n">MCPClientConfig</span><span class="p">(</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;auditoria360-client&quot;</span><span class="p">,</span>
            <span class="n">target_server</span><span class="o">=</span><span class="s2">&quot;auditoria360-main&quot;</span><span class="p">,</span>
            <span class="n">auto_connect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="s2">&quot;auditoria360-client&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">auditoria_client</span>

        <span class="c1"># Configure Copilot integration</span>
        <span class="n">config</span><span class="o">.</span><span class="n">copilot</span><span class="o">.</span><span class="n">enabled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">config</span><span class="o">.</span><span class="n">copilot</span><span class="o">.</span><span class="n">tools_enabled</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;payroll_calculator&quot;</span><span class="p">,</span>
            <span class="s2">&quot;compliance_checker&quot;</span><span class="p">,</span>
            <span class="s2">&quot;document_analyzer&quot;</span><span class="p">,</span>
            <span class="s2">&quot;audit_executor&quot;</span><span class="p">,</span>
            <span class="s2">&quot;cct_comparator&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">config</span><span class="o">.</span><span class="n">copilot</span><span class="o">.</span><span class="n">resources_enabled</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;auditoria://payroll/data&quot;</span><span class="p">,</span>
            <span class="s2">&quot;auditoria://employees/info&quot;</span><span class="p">,</span>
            <span class="s2">&quot;auditoria://cct/documents&quot;</span><span class="p">,</span>
            <span class="s2">&quot;auditoria://compliance/rules&quot;</span><span class="p">,</span>
            <span class="s2">&quot;auditoria://knowledge/base&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="c1"># Set feature flags</span>
        <span class="n">config</span><span class="o">.</span><span class="n">features</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;enable_caching&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;enable_compression&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;enable_encryption&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;enable_rate_limiting&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
            <span class="s2">&quot;enable_analytics&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="c1"># Set security configuration</span>
        <span class="n">config</span><span class="o">.</span><span class="n">security</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;require_authentication&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;allowed_origins&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;*&quot;</span><span class="p">],</span>
            <span class="s2">&quot;max_request_size&quot;</span><span class="p">:</span> <span class="mi">10485760</span><span class="p">,</span>  <span class="c1"># 10MB</span>
            <span class="s2">&quot;rate_limit_requests_per_minute&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">config</span>
        <span class="k">return</span> <span class="n">config</span>

<div class="viewcode-block" id="MCPConfigManager.get_config">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPConfigManager.get_config">[documentos]</a>
    <span class="k">def</span> <span class="nf">get_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MCPConfiguration</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get current configuration&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span></div>


<div class="viewcode-block" id="MCPConfigManager.add_server">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPConfigManager.add_server">[documentos]</a>
    <span class="k">def</span> <span class="nf">add_server</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">server_config</span><span class="p">:</span> <span class="n">MCPServerConfig</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a new server configuration&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">servers</span><span class="p">[</span><span class="n">server_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">server_config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_config</span><span class="p">()</span></div>


<div class="viewcode-block" id="MCPConfigManager.add_client">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPConfigManager.add_client">[documentos]</a>
    <span class="k">def</span> <span class="nf">add_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">client_config</span><span class="p">:</span> <span class="n">MCPClientConfig</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a new client configuration&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">client_config</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">client_config</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_config</span><span class="p">()</span></div>


<div class="viewcode-block" id="MCPConfigManager.remove_server">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPConfigManager.remove_server">[documentos]</a>
    <span class="k">def</span> <span class="nf">remove_server</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove a server configuration&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">servers</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">servers</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

            <span class="c1"># Remove config file</span>
            <span class="n">config_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">servers_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.yaml&quot;</span>
            <span class="k">if</span> <span class="n">config_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">config_file</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">save_config</span><span class="p">()</span></div>


<div class="viewcode-block" id="MCPConfigManager.remove_client">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPConfigManager.remove_client">[documentos]</a>
    <span class="k">def</span> <span class="nf">remove_client</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Remove a client configuration&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

            <span class="c1"># Remove config file</span>
            <span class="n">config_file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clients_dir</span> <span class="o">/</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.yaml&quot;</span>
            <span class="k">if</span> <span class="n">config_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
                <span class="n">config_file</span><span class="o">.</span><span class="n">unlink</span><span class="p">()</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">save_config</span><span class="p">()</span></div>


<div class="viewcode-block" id="MCPConfigManager.validate_config">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPConfigManager.validate_config">[documentos]</a>
    <span class="k">def</span> <span class="nf">validate_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate configuration and return list of errors&quot;&quot;&quot;</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;No configuration loaded&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">errors</span>

        <span class="c1"># Validate server configurations</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">server_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">servers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">server_config</span><span class="o">.</span><span class="n">transport</span> <span class="o">==</span> <span class="n">MCPTransportType</span><span class="o">.</span><span class="n">HTTP</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="o">.</span><span class="n">host</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">server_config</span><span class="o">.</span><span class="n">port</span><span class="p">:</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Server </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: HTTP transport requires host and port&quot;</span>
                    <span class="p">)</span>
            <span class="k">elif</span> <span class="n">server_config</span><span class="o">.</span><span class="n">transport</span> <span class="o">==</span> <span class="n">MCPTransportType</span><span class="o">.</span><span class="n">STDIO</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">server_config</span><span class="o">.</span><span class="n">command</span><span class="p">:</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Server </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: STDIO transport requires command&quot;</span><span class="p">)</span>

        <span class="c1"># Validate client configurations</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">client_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">clients</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">client_config</span><span class="o">.</span><span class="n">target_server</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">servers</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Client </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">: target server &#39;</span><span class="si">{</span><span class="n">client_config</span><span class="o">.</span><span class="n">target_server</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">errors</span></div>


<div class="viewcode-block" id="MCPConfigManager.generate_copilot_config">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.MCPConfigManager.generate_copilot_config">[documentos]</a>
    <span class="k">def</span> <span class="nf">generate_copilot_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate GitHub Copilot configuration for MCP integration&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">load_config</span><span class="p">()</span>

        <span class="n">copilot_config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;mcpServers&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;tools&quot;</span><span class="p">:</span> <span class="p">{},</span> <span class="s2">&quot;resources&quot;</span><span class="p">:</span> <span class="p">{}}</span>

        <span class="c1"># Add server configurations for Copilot</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">server_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">servers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">server_config</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
                <span class="n">server_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;http://</span><span class="si">{</span><span class="n">server_config</span><span class="o">.</span><span class="n">host</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">server_config</span><span class="o">.</span><span class="n">port</span><span class="si">}{</span><span class="n">server_config</span><span class="o">.</span><span class="n">path</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">copilot_config</span><span class="p">[</span><span class="s2">&quot;mcpServers&quot;</span><span class="p">][</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="s2">&quot;node&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;/path/to/mcp-client.js&quot;</span><span class="p">,</span> <span class="s2">&quot;--server-url&quot;</span><span class="p">,</span> <span class="n">server_url</span><span class="p">],</span>
                    <span class="s2">&quot;env&quot;</span><span class="p">:</span> <span class="n">server_config</span><span class="o">.</span><span class="n">env</span> <span class="ow">or</span> <span class="p">{},</span>
                <span class="p">}</span>

        <span class="c1"># Add enabled tools</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">copilot</span><span class="o">.</span><span class="n">enabled</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">tool_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">copilot</span><span class="o">.</span><span class="n">tools_enabled</span><span class="p">:</span>
                <span class="n">copilot_config</span><span class="p">[</span><span class="s2">&quot;tools&quot;</span><span class="p">][</span><span class="n">tool_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;AUDITORIA360 </span><span class="si">{</span><span class="n">tool_name</span><span class="si">}</span><span class="s2"> tool&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;server&quot;</span><span class="p">:</span> <span class="s2">&quot;auditoria360-main&quot;</span><span class="p">,</span>
                <span class="p">}</span>

            <span class="k">for</span> <span class="n">resource_uri</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">copilot</span><span class="o">.</span><span class="n">resources_enabled</span><span class="p">:</span>
                <span class="n">resource_name</span> <span class="o">=</span> <span class="n">resource_uri</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">copilot_config</span><span class="p">[</span><span class="s2">&quot;resources&quot;</span><span class="p">][</span><span class="n">resource_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;AUDITORIA360 </span><span class="si">{</span><span class="n">resource_name</span><span class="si">}</span><span class="s2"> resource&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;uri&quot;</span><span class="p">:</span> <span class="n">resource_uri</span><span class="p">,</span>
                    <span class="s2">&quot;server&quot;</span><span class="p">:</span> <span class="s2">&quot;auditoria360-main&quot;</span><span class="p">,</span>
                <span class="p">}</span>

        <span class="k">return</span> <span class="n">copilot_config</span></div>
</div>



<span class="c1"># Global configuration instance</span>
<span class="n">_config_manager</span> <span class="o">=</span> <span class="kc">None</span>


<div class="viewcode-block" id="get_config_manager">
<a class="viewcode-back" href="../../../modules/mcp.html#src.mcp.config.get_config_manager">[documentos]</a>
<span class="k">def</span> <span class="nf">get_config_manager</span><span class="p">(</span><span class="n">config_dir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MCPConfigManager</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get global configuration manager instance&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">_config_manager</span>
    <span class="k">if</span> <span class="n">_config_manager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">_config_manager</span> <span class="o">=</span> <span class="n">MCPConfigManager</span><span class="p">(</span><span class="n">config_dir</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_config_manager</span></div>

</pre>
            </div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
          <h1 class="logo"><a href="../../../index.html">AUDITORIA360</a></h1>

          <search id="searchbox" style="display: none" role="search">
            <div class="searchformwrapper">
              <form class="search" action="../../../search.html" method="get">
                <input
                  type="text"
                  name="q"
                  aria-labelledby="searchlabel"
                  autocomplete="off"
                  autocorrect="off"
                  autocapitalize="off"
                  spellcheck="false"
                  placeholder="Search"
                />
                <input type="submit" value="Ir" />
              </form>
            </div>
          </search>
          <script>
            document.getElementById("searchbox").style.display = "block";
          </script>
          <h3>Navegação</h3>
          <p class="caption" role="heading">
            <span class="caption-text">Módulos da API:</span>
          </p>
          <ul>
            <li class="toctree-l1">
              <a class="reference internal" href="../../../modules/auth.html"
                >Módulo de Autenticação</a
              >
            </li>
            <li class="toctree-l1">
              <a class="reference internal" href="../../../modules/models.html"
                >Modelos de Dados</a
              >
            </li>
            <li class="toctree-l1">
              <a
                class="reference internal"
                href="../../../modules/services.html"
                >Serviços de Negócio</a
              >
            </li>
            <li class="toctree-l1">
              <a class="reference internal" href="../../../modules/api.html"
                >APIs REST</a
              >
            </li>
            <li class="toctree-l1">
              <a class="reference internal" href="../../../modules/core.html"
                >Módulo Central</a
              >
            </li>
            <li class="toctree-l1">
              <a class="reference internal" href="../../../modules/utils.html"
                >Utilitários</a
              >
            </li>
            <li class="toctree-l1">
              <a class="reference internal" href="../../../modules/schemas.html"
                >Esquemas Pydantic</a
              >
            </li>
            <li class="toctree-l1">
              <a class="reference internal" href="../../../modules/mcp.html"
                >Integração MCP</a
              >
            </li>
          </ul>

          <div class="relations">
            <h3>Related Topics</h3>
            <ul>
              <li>
                <a href="../../../index.html">Documentation overview</a>
                <ul>
                  <li>
                    <a href="../../index.html">Código do módulo</a>
                    <ul></ul>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, AUDITORIA360 Team. | Powered by
      <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a> &amp;
      <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
    </div>
  </body>
</html>
